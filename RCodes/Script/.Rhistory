##############
#TESIS Parte 2
##############
#El objetivo de este script es poder arrojar una matriz que contenga el coeficiente
#de traspaso hacia los precios de internet. Este depende de distintos
#intervalos de distancia.. j y k.
#(1)Limpiar memoria y cargar librerias
#----------------------------------------
rm(list = ls())
librerias <- c("tidyverse","ggplot2",
"stringr","dummies",
"readxl","bizdays")
lapply(librerias,library, character.only = TRUE)
# Nweekdays <- Vectorize(function(a, b)
#   sum(!weekdays(seq(a, b, "days")) %in% c("domingo", "sábado")))
#(2) Directorio de trabajo
#----------------------------------------
directorio = dirname(rstudioapi::getSourceEditorContext()$path)
setwd(directorio)
dirmother = dirname(directorio)
source("../regresion.R")
#(3) Base de Datos
#-----------------------------------------
load(paste0(dirmother,"/Base/Base_duraciones_01.RData")) #Base de duraciones
nexchange_rate <-read_excel(path = paste0(dirmother,"/USDPEN2.xlsx"),
"Sheet 1") #Tipo de cambio
#Se elimina aquellas duraciones de precios menores a 5 dias y los censurados.
tabla_duraciones <- filter(tabla_duraciones, DDias >=5 )
tabla_duraciones <- filter(tabla_duraciones, Status==0)
sapply(nexchange_rate, class) #Revisamos los "types"
sapply(tabla_duraciones, class)
#Formato Date
nexchange_rate$fecha <- as.Date(nexchange_rate$fecha)
#Calendario para Perú
CalPeru <- create.calendar("CalPeru",
holidays = integer(0),
weekdays = c("saturday", "sunday"),
start.date = NULL,
end.date = NULL,
adjust.from = adjust.none,
adjust.to = adjust.none, financial = TRUE
)
View(regresion)
View(tabla_duraciones)
